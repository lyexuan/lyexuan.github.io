webpackJsonp([38],{632:function(n,s){n.exports={content:["article",["h2","\u4e00\u3001package.json"],["p","\u8fd0\u884c\u547d\u4ee4\u8bf4\u660e\uff1a"],["pre",{lang:null,highlighted:'<span class="token operator">/</span><span class="token operator">/</span> \u5f00\u53d1\u6a21\u5f0f\u8fd0\u884c\u7a0b\u5e8f\nnpm start\n<span class="token operator">/</span><span class="token operator">/</span> \u5f00\u53d1\u6a21\u5f0f\u8fde\u63a5\u6b63\u5f0f\u73af\u5883\nnpm run serve<span class="token operator">-</span>pro\n<span class="token operator">/</span><span class="token operator">/</span> \u6b63\u5f0f\u73af\u5883\u6253\u5305\nnpm run build\n<span class="token operator">/</span><span class="token operator">/</span> \u6b63\u5f0f\u73af\u5883\u6253\u5305\u5e76\u8f93\u51fa\u5206\u6790\u62a5\u544a\nnpm run build<span class="token operator">-</span>report\n<span class="token operator">/</span><span class="token operator">/</span> \u6d4b\u8bd5\u73af\u5883\u6253\u5305\nnpm run build<span class="token operator">-</span>test\n<span class="token operator">/</span><span class="token operator">/</span> \u6d4b\u8bd5\u73af\u5883\u6253\u5305\u5e76\u8f93\u51fa\u5206\u6790\u62a5\u544a\nnpm run build<span class="token operator">-</span>test<span class="token operator">-</span>report'},["code","// \u5f00\u53d1\u6a21\u5f0f\u8fd0\u884c\u7a0b\u5e8f\nnpm start\n// \u5f00\u53d1\u6a21\u5f0f\u8fde\u63a5\u6b63\u5f0f\u73af\u5883\nnpm run serve-pro\n// \u6b63\u5f0f\u73af\u5883\u6253\u5305\nnpm run build\n// \u6b63\u5f0f\u73af\u5883\u6253\u5305\u5e76\u8f93\u51fa\u5206\u6790\u62a5\u544a\nnpm run build-report\n// \u6d4b\u8bd5\u73af\u5883\u6253\u5305\nnpm run build-test\n// \u6d4b\u8bd5\u73af\u5883\u6253\u5305\u5e76\u8f93\u51fa\u5206\u6790\u62a5\u544a\nnpm run build-test-report"]],["h2","\u4e8c\u3001vue.config.js"],["h3","\u901a\u7528\u914d\u7f6e"],["p","\u4e0d\u540c\u9879\u76ee\u90fd\u53ef\u590d\u7528\u7684\u901a\u7528\u914d\u7f6e\u653e\u7f6e\u5728'fzis-web/config/vue.config.js'\u4e0b\u3002"],["pre",{lang:null,highlighted:'var webpack <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">\'webpack\'</span><span class="token punctuation">)</span>\n\n<span class="token operator">/</span><span class="token operator">/</span> \u901a\u7528\u914d\u7f6e\n<span class="token keyword">const</span> COMMON_CONFIG <span class="token operator">=</span> {\n  publicPath<span class="token punctuation">:</span> <span class="token string">\'./\'</span><span class="token punctuation">,</span>\n  productionSourceMap<span class="token punctuation">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>\n  <span class="token operator">/</span><span class="token operator">/</span> antd\u4e3b\u9898\u76f8\u5173\u914d\u7f6e\n  css<span class="token punctuation">:</span> {\n    loaderOptions<span class="token punctuation">:</span> {\n      less<span class="token punctuation">:</span> {\n        modifyVars<span class="token punctuation">:</span> {\n          <span class="token string">\'primary-color\'</span><span class="token punctuation">:</span> <span class="token string">\'#2b7efe\'</span><span class="token punctuation">,</span>\n        }<span class="token punctuation">,</span>\n        javascriptEnabled<span class="token punctuation">:</span> <span class="token boolean">true</span>\n      }\n    }\n  }<span class="token punctuation">,</span>\n}\n\n<span class="token operator">/</span><span class="token operator">/</span> \u751f\u4ea7\u73af\u5883\u914d\u7f6e\n<span class="token keyword">const</span> PROD_CONFIG <span class="token operator">=</span> {\n  chainWebpack<span class="token punctuation">:</span> config <span class="token operator">=</span><span class="token operator">></span> {\n    <span class="token operator">/</span><span class="token operator">/</span> \u79fb\u9664 prefetch \u63d2\u4ef6\n    config<span class="token punctuation">.</span>plugins<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token string">\'prefetch\'</span><span class="token punctuation">)</span>\n\n    <span class="token operator">/</span><span class="token operator">/</span> \u79fb\u9664moment\u7684\u591a\u8bed\u8a00\u5305\n    config<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span><span class="token string">\'ignore\'</span><span class="token punctuation">)</span>\n      <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>new webpack<span class="token punctuation">.</span><span class="token function">IgnorePlugin</span><span class="token punctuation">(</span><span class="token operator">/</span><span class="token operator">^</span>\\<span class="token punctuation">.</span>\\<span class="token operator">/</span>locale$<span class="token operator">/</span><span class="token punctuation">,</span> <span class="token operator">/</span>moment$<span class="token operator">/</span><span class="token punctuation">)</span><span class="token punctuation">)</span>\n\n    <span class="token operator">/</span><span class="token operator">/</span> \u8bbe\u7f6e\u56fe\u7247\u88ab\u8f6c\u6362\u6210base64\u7684\u5927\u5c0f\u4e0a\u9650\u503c\n    config<span class="token punctuation">.</span>module\n      <span class="token punctuation">.</span><span class="token function">rule</span><span class="token punctuation">(</span><span class="token string">\'images\'</span><span class="token punctuation">)</span>\n      <span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token string">\'url-loader\'</span><span class="token punctuation">)</span>\n      <span class="token punctuation">.</span><span class="token function">loader</span><span class="token punctuation">(</span><span class="token string">\'url-loader\'</span><span class="token punctuation">)</span>\n      <span class="token punctuation">.</span><span class="token function">tap</span><span class="token punctuation">(</span>options <span class="token operator">=</span><span class="token operator">></span> Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>options<span class="token punctuation">,</span> { limit<span class="token punctuation">:</span> <span class="token number">20000</span> }<span class="token punctuation">)</span><span class="token punctuation">)</span>\n\n    <span class="token operator">/</span><span class="token operator">/</span> \u4ee3\u7801\u5206\u5272\u8bbe\u7f6e\n    config<span class="token punctuation">.</span>optimization<span class="token punctuation">.</span><span class="token function">splitChunks</span><span class="token punctuation">(</span>{\n      cacheGroups<span class="token punctuation">:</span> {\n        common<span class="token punctuation">:</span> {\n          name<span class="token punctuation">:</span> <span class="token string">\'chunk-common\'</span><span class="token punctuation">,</span> <span class="token operator">/</span><span class="token operator">/</span> \u6253\u5305\u540e\u7684\u6587\u4ef6\u540d\n          chunks<span class="token punctuation">:</span> <span class="token string">\'initial\'</span><span class="token punctuation">,</span> <span class="token operator">/</span><span class="token operator">/</span> \n          minChunks<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>\n          maxInitialRequests<span class="token punctuation">:</span> <span class="token number">5</span><span class="token punctuation">,</span>\n          minSize<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>\n          priority<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>\n          reuseExistingChunk<span class="token punctuation">:</span> <span class="token boolean">true</span>\n        }<span class="token punctuation">,</span>\n        vendors<span class="token punctuation">:</span> {\n          name<span class="token punctuation">:</span> <span class="token string">\'chunk-vendors\'</span><span class="token punctuation">,</span>\n          test<span class="token punctuation">:</span> <span class="token operator">/</span><span class="token punctuation">[</span>\\\\<span class="token operator">/</span><span class="token punctuation">]</span>node_modules<span class="token punctuation">[</span>\\\\<span class="token operator">/</span><span class="token punctuation">]</span><span class="token operator">/</span><span class="token punctuation">,</span>\n          chunks<span class="token punctuation">:</span> <span class="token string">\'initial\'</span><span class="token punctuation">,</span>\n          priority<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>\n          reuseExistingChunk<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n          enforce<span class="token punctuation">:</span> <span class="token boolean">true</span>\n        }<span class="token punctuation">,</span>\n        antDesignVue<span class="token punctuation">:</span> {\n          name<span class="token punctuation">:</span> <span class="token string">\'chunk-ant-design-vue\'</span><span class="token punctuation">,</span>\n          test<span class="token punctuation">:</span> <span class="token operator">/</span><span class="token punctuation">[</span>\\\\<span class="token operator">/</span><span class="token punctuation">]</span>node_modules<span class="token punctuation">[</span>\\\\<span class="token operator">/</span><span class="token punctuation">]</span>ant<span class="token operator">-</span>design<span class="token operator">-</span>vue<span class="token punctuation">[</span>\\\\<span class="token operator">/</span><span class="token punctuation">]</span><span class="token operator">/</span><span class="token punctuation">,</span>\n          chunks<span class="token punctuation">:</span> <span class="token string">\'initial\'</span><span class="token punctuation">,</span>\n          priority<span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>\n          reuseExistingChunk<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n          enforce<span class="token punctuation">:</span> <span class="token boolean">true</span>\n        }\n      }\n    }<span class="token punctuation">)</span>\n  }<span class="token punctuation">,</span>\n}\n\n<span class="token operator">/</span><span class="token operator">/</span> \u5f00\u53d1\u73af\u5883\u914d\u7f6e\n<span class="token keyword">const</span> DEV_CONFIG <span class="token operator">=</span> {\n  configureWebpack<span class="token punctuation">:</span> config <span class="token operator">=</span><span class="token operator">></span> {\n    <span class="token operator">/</span><span class="token operator">/</span> \u5f00\u53d1\u6a21\u5f0f\u4e0b\u5f00\u542fsource<span class="token operator">-</span>map\n    config<span class="token punctuation">.</span>devtool <span class="token operator">=</span> <span class="token string">\'source-map\'</span>\n  }<span class="token punctuation">,</span>\n}\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> {\n  COMMON_CONFIG<span class="token punctuation">,</span>\n  PROD_CONFIG<span class="token punctuation">,</span>\n  DEV_CONFIG\n}'},["code","var webpack = require('webpack')\n\n// \u901a\u7528\u914d\u7f6e\nconst COMMON_CONFIG = {\n  publicPath: './',\n  productionSourceMap: false,\n  // antd\u4e3b\u9898\u76f8\u5173\u914d\u7f6e\n  css: {\n    loaderOptions: {\n      less: {\n        modifyVars: {\n          'primary-color': '#2b7efe',\n        },\n        javascriptEnabled: true\n      }\n    }\n  },\n}\n\n// \u751f\u4ea7\u73af\u5883\u914d\u7f6e\nconst PROD_CONFIG = {\n  chainWebpack: config => {\n    // \u79fb\u9664 prefetch \u63d2\u4ef6\n    config.plugins.delete('prefetch')\n\n    // \u79fb\u9664moment\u7684\u591a\u8bed\u8a00\u5305\n    config.plugin('ignore')\n      .use(new webpack.IgnorePlugin(/^\\.\\/locale$/, /moment$/))\n\n    // \u8bbe\u7f6e\u56fe\u7247\u88ab\u8f6c\u6362\u6210base64\u7684\u5927\u5c0f\u4e0a\u9650\u503c\n    config.module\n      .rule('images')\n      .use('url-loader')\n      .loader('url-loader')\n      .tap(options => Object.assign(options, { limit: 20000 }))\n\n    // \u4ee3\u7801\u5206\u5272\u8bbe\u7f6e\n    config.optimization.splitChunks({\n      cacheGroups: {\n        common: {\n          name: 'chunk-common', // \u6253\u5305\u540e\u7684\u6587\u4ef6\u540d\n          chunks: 'initial', // \n          minChunks: 2,\n          maxInitialRequests: 5,\n          minSize: 0,\n          priority: 1,\n          reuseExistingChunk: true\n        },\n        vendors: {\n          name: 'chunk-vendors',\n          test: /[\\\\/]node_modules[\\\\/]/,\n          chunks: 'initial',\n          priority: 2,\n          reuseExistingChunk: true,\n          enforce: true\n        },\n        antDesignVue: {\n          name: 'chunk-ant-design-vue',\n          test: /[\\\\/]node_modules[\\\\/]ant-design-vue[\\\\/]/,\n          chunks: 'initial',\n          priority: 3,\n          reuseExistingChunk: true,\n          enforce: true\n        }\n      }\n    })\n  },\n}\n\n// \u5f00\u53d1\u73af\u5883\u914d\u7f6e\nconst DEV_CONFIG = {\n  configureWebpack: config => {\n    // \u5f00\u53d1\u6a21\u5f0f\u4e0b\u5f00\u542fsource-map\n    config.devtool = 'source-map'\n  },\n}\n\nmodule.exports = {\n  COMMON_CONFIG,\n  PROD_CONFIG,\n  DEV_CONFIG\n}"]],["h3","\u7279\u6709\u914d\u7f6e"],["p","\u4e0d\u540c\u9879\u76ee\u90fd\u62e5\u6709\u7279\u5b9a\u7684\u5f00\u53d1\u4ee3\u7406\u914d\u7f6e\uff0c\u914d\u7f6e\u8bfb\u53d6\u73af\u5883\u53d8\u91cfprocess.env.VUE_APP_MODE\uff0c\u6839\u636e\u73af\u5883\u7684\u4e0d\u540c\u8bbe\u7f6e\u4e0d\u540c\u7684\u4ee3\u7406\u3002\u73af\u5883\u53d8\u91cf\u7684\u8bbe\u5b9a\uff0c\u89c1\u7b2c\u4e09\u70b9\u3002"],["h2","\u4e09\u3001\u73af\u5883\u914d\u7f6e"],["p","\u4ee5\u4e0b\u51e0\u4e2a\u6587\u4ef6\u7528\u4e8e\u5b9a\u4e49\u73af\u5883\u53d8\u91cf\uff1a"],["pre",{lang:null,highlighted:'<span class="token punctuation">.</span>env<span class="token punctuation">.</span>development <span class="token operator">/</span><span class="token operator">/</span> \u5f00\u53d1\u6a21\u5f0f\n<span class="token punctuation">.</span>env<span class="token punctuation">.</span>devpro <span class="token operator">/</span><span class="token operator">/</span> \u5f00\u53d1\u6a21\u5f0f\u8fde\u63a5\u6b63\u5f0f\u73af\u5883\n<span class="token punctuation">.</span>env<span class="token punctuation">.</span>production <span class="token operator">/</span><span class="token operator">/</span> \u6b63\u5f0f\u73af\u5883\u6253\u5305\n<span class="token punctuation">.</span>env<span class="token punctuation">.</span>testpro <span class="token operator">/</span><span class="token operator">/</span> \u6d4b\u8bd5\u73af\u5883\u6253\u5305'},["code",".env.development // \u5f00\u53d1\u6a21\u5f0f\n.env.devpro // \u5f00\u53d1\u6a21\u5f0f\u8fde\u63a5\u6b63\u5f0f\u73af\u5883\n.env.production // \u6b63\u5f0f\u73af\u5883\u6253\u5305\n.env.testpro // \u6d4b\u8bd5\u73af\u5883\u6253\u5305"]],["p","\u6587\u4ef6\u4e2d\u7684VUE_APP_MODE\u5b9a\u4e49\u4e86\u6a21\u5f0f\u540d\u79f0\uff0c\u65e0\u8bba\u5728\u8fd0\u884cnode\u7a0b\u5e8f\uff0c\u8fd8\u662f\u5728\u5e94\u7528\u6e90\u7801\u5185\u90e8\u7684js\u4e2d\uff0c\u90fd\u53ef\u4ee5\u901a\u8fc7process.env.VUE_APP_MODE\u6765\u8bfb\u53d6\u73af\u5883\u540d\u79f0\uff0c\u4ee5\u505a\u903b\u8f91\u533a\u5206\u3002"],["h2","\u56db\u3001\u8def\u7531\u914d\u7f6e"],["p","\u8def\u7531\u914d\u7f6e\u65b9\u5f0f\u4f9d\u7167vue-router\u3010",["a",{title:null,href:"https://router.vuejs.org/zh/\u3011\uff0c\u914d\u7f6e\u6587\u4ef6\u4f4d\u4e8e/src/common/router.config.js"},"https://router.vuejs.org/zh/\u3011\uff0c\u914d\u7f6e\u6587\u4ef6\u4f4d\u4e8e/src/common/router.config.js"]],["h2","\u4e94\u3001\u9879\u76ee\u914d\u7f6e"],["p","\u5e94\u7528\u4e2d\u7684\u516c\u5171\u5e38\u91cf\u503c\uff0c\u7edf\u4e00\u5b9a\u4e49\u5728\u914d\u7f6e\u6587\u4ef6/src/common/config.js\u4e2d"]],meta:{title:"\u914d\u7f6e\u8bf4\u660e",publishDate:"2021-01-05T00:00:00.000Z",createDate:"2021-01-05T00:00:00.000Z",category:"frame",abstract:"\u914d\u7f6e\u8bf4\u660e",order:20,filename:"posts/frame/20-\u914d\u7f6e\u8bf4\u660e.md"}}}});